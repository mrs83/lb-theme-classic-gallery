angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(t){return t}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(t,e,i,n,s,a){function r(){a.$broadcast("gettextLanguageChanged")}var o,l="$$noContext",h='<span id="test" title="test" class="tested">test</span>',g=angular.element("<span>"+h+"</span>").html()!==h,c=function(t){return o.debug&&o.currentLanguage!==o.baseLanguage?o.debugPrefix+t:t},m=function(t){return o.showTranslatedMarkers?o.translatedMarkerPrefix+t+o.translatedMarkerSuffix:t};return o={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:n("strings"),setCurrentLanguage:function(t){this.currentLanguage=t,r()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(t,e){this.strings[t]||(this.strings[t]={});for(var i in e){var n=e[i];if(g&&(i=angular.element("<span>"+i+"</span>").html()),angular.isString(n)||angular.isArray(n)){var s={};s[l]=n,n=s}for(var a in n){var o=n[a];n[a]=angular.isArray(o)?o:[o]}this.strings[t][i]=n}r()},getStringFormFor:function(e,i,n,s){if(!e)return null;var a=this.strings[e]||{},r=a[i]||{},o=r[s||l]||[];return o[t(e,n)]},getString:function(t,i,n){var a=e(this.currentLanguage);return t=this.getStringFormFor(this.currentLanguage,t,1,n)||this.getStringFormFor(a,t,1,n)||c(t),t=i?s(t)(i):t,m(t)},getPlural:function(t,i,n,a,r){var o=e(this.currentLanguage);return i=this.getStringFormFor(this.currentLanguage,i,t,r)||this.getStringFormFor(o,i,t,r)||c(1===t?i:n),a&&(a.$count=t,i=s(i)(a)),m(i)},loadRemote:function(t){return i({method:"GET",url:t,cache:o.cache}).then(function(t){var e=t.data;for(var i in e)o.setStrings(i,e[i]);return t})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(t,e,i,n,s){function a(t,e,i){if(!t)throw new Error("You should add a "+e+" attribute whenever you add a "+i+" attribute.")}var r=function(){return String.prototype.trim?function(t){return"string"==typeof t?t.trim():t}:function(t){return"string"==typeof t?t.replace(/^\s*/,"").replace(/\s*$/,""):t}}(),o=parseInt((/msie (\d+)/.exec(angular.lowercase(s.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(s,l){a(!l.translatePlural||l.translateN,"translate-n","translate-plural"),a(!l.translateN||l.translatePlural,"translate-plural","translate-n");var h=r(s.html()),g=l.translatePlural,c=l.translateContext;return o<=8&&"<!--IE fix-->"===h.slice(-13)&&(h=h.slice(0,-13)),l.$set("translate",void 0),{post:function(s,a,o){function l(){var e;g?(s=d||(d=s.$new()),s.$count=m(s),e=t.getPlural(s.$count,h,g,null,c)):e=t.getString(h,null,c);var o=a.contents();if(0!==o.length){if(e===r(o.html()))return void(u&&n(o)(s));var l=angular.element("<span>"+e+"</span>");n(l.contents())(s);var f=l.contents();i.enter(f,a),i.leave(o)}}var m=e(o.translateN),d=null,u=!0;o.translateN&&s.$watch(o.translateN,l),s.$on("gettextLanguageChanged",l),l(),u=!1}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var t={},e=/([^_]+)_[^_]+$/;return function(i){if(t[i])return t[i];var n=e.exec(i);return n?(t[i]=n[1],n[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(t){function e(e,i){return t.getString(e,null,i)}return e.$stateful=!0,e}]),angular.module("gettext").factory("gettextPlurals",function(){return function(t,e){switch(t){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return e%10!=1||e%100==11?1:0;case"jv":return 0!=e?1:0;case"mk":return 1==e||e%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return e>1?1:0;case"lv":return e%10==1&&e%100!=11?0:0!=e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"mnk":return 0==e?0:1==e?1:2;case"ro":return 1==e?0:0==e||e%100>0&&e%100<20?1:2;case"pl":return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&e<=4?1:2;case"sl":return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0;case"mt":return 1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"gd":return 1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3;case"cy":return 1==e?0:2==e?1:8!=e&&11!=e?2:3;case"kw":return 1==e?0:2==e?1:3==e?2:3;case"ga":return 1==e?0:2==e?1:e<7?2:e<11?3:4;case"ar":return 0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5;default:return 1!=e?1:0}}}),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[translate]{visibility:hidden !important;}</style>'),!function(t){function e(){return t("body").height()>t(window).height()}var i=function(e,i){this.settings=i,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,height:0,aspectRatio:0},this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this["yield"]={every:2,flushed:0},this.border=i.border>=0?i.border:i.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.rows=0,this.spinner={phase:0,timeSlot:150,$el:t('<div class="spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.checkWidthIntervalId=null,this.galleryWidth=e.width(),this.$gallery=e};i.prototype.getSuffix=function(t,e){var i,n;for(i=t>e?t:e,n=0;n<this.suffixRanges.length;n++)if(i<=this.suffixRanges[n])return this.settings.sizeRangeSuffixes[this.suffixRanges[n]];return this.settings.sizeRangeSuffixes[this.suffixRanges[n-1]]},i.prototype.removeSuffix=function(t,e){return t.substring(0,t.length-e.length)},i.prototype.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},i.prototype.getUsedSuffix=function(t){for(var e in this.settings.sizeRangeSuffixes)if(this.settings.sizeRangeSuffixes.hasOwnProperty(e)){if(0===this.settings.sizeRangeSuffixes[e].length)continue;if(this.endsWith(t,this.settings.sizeRangeSuffixes[e]))return this.settings.sizeRangeSuffixes[e]}return""},i.prototype.newSrc=function(t,e,i,n){var s;if(this.settings.thumbnailPath)s=this.settings.thumbnailPath(t,e,i,n);else{var a=t.match(this.settings.extension),r=null!==a?a[0]:"";s=t.replace(this.settings.extension,""),s=this.removeSuffix(s,this.getUsedSuffix(s)),s+=this.getSuffix(e,i)+r}return s},i.prototype.showImg=function(t,e){this.settings.cssAnimation?(t.addClass("entry-visible"),e&&e()):(t.stop().fadeTo(this.settings.imagesAnimationDuration,1,e),t.find("> img, > a > img").stop().fadeTo(this.settings.imagesAnimationDuration,1,e))},i.prototype.extractImgSrcFromImage=function(t){var e="undefined"!=typeof t.data("safe-src")?t.data("safe-src"):t.attr("src");return t.data("jg.originalSrc",e),e},i.prototype.imgFromEntry=function(t){var e=t.find("> img");return 0===e.length&&(e=t.find("> a > img")),0===e.length?null:e},i.prototype.captionFromEntry=function(t){var e=t.find("> .caption");return 0===e.length?null:e},i.prototype.displayEntry=function(e,i,n,s,a,r){e.width(s),e.height(r),e.css("top",n),e.css("left",i);var o=this.imgFromEntry(e);if(null!==o){o.css("width",s),o.css("height",a),o.css("margin-left",-s/2),o.css("margin-top",-a/2);var l=o.attr("src"),h=this.newSrc(l,s,a,o[0]);o.one("error",function(){o.attr("src",o.data("jg.originalSrc"))});var g=function(){l!==h&&o.attr("src",h)};"skipped"===e.data("jg.loaded")?this.onImageEvent(l,t.proxy(function(){this.showImg(e,g),e.data("jg.loaded",!0)},this)):this.showImg(e,g)}else this.showImg(e);this.displayEntryCaption(e)},i.prototype.displayEntryCaption=function(e){var i=this.imgFromEntry(e);if(null!==i&&this.settings.captions){var n=this.captionFromEntry(e);if(null===n){var s=i.attr("alt");this.isValidCaption(s)||(s=e.attr("title")),this.isValidCaption(s)&&(n=t('<div class="caption">'+s+"</div>"),e.append(n),e.data("jg.createdCaption",!0))}null!==n&&(this.settings.cssAnimation||n.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(e))}else this.removeCaptionEventsHandlers(e)},i.prototype.isValidCaption=function(t){return"undefined"!=typeof t&&t.length>0},i.prototype.onEntryMouseEnterForCaption=function(e){var i=this.captionFromEntry(t(e.currentTarget));this.settings.cssAnimation?i.addClass("caption-visible").removeClass("caption-hidden"):i.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},i.prototype.onEntryMouseLeaveForCaption=function(e){var i=this.captionFromEntry(t(e.currentTarget));this.settings.cssAnimation?i.removeClass("caption-visible").removeClass("caption-hidden"):i.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.nonVisibleOpacity)},i.prototype.addCaptionEventsHandlers=function(e){var i=e.data("jg.captionMouseEvents");"undefined"==typeof i&&(i={mouseenter:t.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:t.proxy(this.onEntryMouseLeaveForCaption,this)},e.on("mouseenter",void 0,void 0,i.mouseenter),e.on("mouseleave",void 0,void 0,i.mouseleave),e.data("jg.captionMouseEvents",i))},i.prototype.removeCaptionEventsHandlers=function(t){var e=t.data("jg.captionMouseEvents");"undefined"!=typeof e&&(t.off("mouseenter",void 0,e.mouseenter),t.off("mouseleave",void 0,e.mouseleave),t.removeData("jg.captionMouseEvents"))},i.prototype.prepareBuildingRow=function(t){var e,i,n,s,a,r=!0,o=0,l=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,h=l/this.buildingRow.aspectRatio,g=this.settings.rowHeight,c=this.buildingRow.width/l>this.settings.justifyThreshold;if(t&&"hide"===this.settings.lastRow&&!c){for(e=0;e<this.buildingRow.entriesBuff.length;e++)i=this.buildingRow.entriesBuff[e],this.settings.cssAnimation?i.removeClass("entry-visible"):(i.stop().fadeTo(0,.1),i.find("> img, > a > img").fadeTo(0,0));return-1}for(t&&!c&&"justify"!==this.settings.lastRow&&"hide"!==this.settings.lastRow&&(r=!1,this.rows>0&&(g=(this.offY-this.border-this.settings.margins*this.rows)/this.rows,r=g*this.buildingRow.aspectRatio/l>this.settings.justifyThreshold)),e=0;e<this.buildingRow.entriesBuff.length;e++)i=this.buildingRow.entriesBuff[e],n=i.data("jg.width")/i.data("jg.height"),r?(s=e===this.buildingRow.entriesBuff.length-1?l:h*n,a=h):(s=g*n,a=g),l-=Math.round(s),i.data("jg.jwidth",Math.round(s)),i.data("jg.jheight",Math.ceil(a)),(0===e||o>a)&&(o=a);return this.buildingRow.height=o,r},i.prototype.clearBuildingRow=function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},i.prototype.flushRow=function(t){var e,i,n,s=this.settings,a=this.border;if(i=this.prepareBuildingRow(t),t&&"hide"===s.lastRow&&-1===i)return void this.clearBuildingRow();if(this.maxRowHeight&&(this.maxRowHeight.isPercentage&&this.maxRowHeight.value*s.rowHeight<this.buildingRow.height?this.buildingRow.height=this.maxRowHeight.value*s.rowHeight:this.maxRowHeight.value>=s.rowHeight&&this.maxRowHeight.value<this.buildingRow.height&&(this.buildingRow.height=this.maxRowHeight.value)),"center"===s.lastRow||"right"===s.lastRow){var r=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*s.margins;for(n=0;n<this.buildingRow.entriesBuff.length;n++)e=this.buildingRow.entriesBuff[n],r-=e.data("jg.jwidth");"center"===s.lastRow?a+=r/2:"right"===s.lastRow&&(a+=r)}for(n=0;n<this.buildingRow.entriesBuff.length;n++)e=this.buildingRow.entriesBuff[n],this.displayEntry(e,a,this.offY,e.data("jg.jwidth"),e.data("jg.jheight"),this.buildingRow.height),a+=e.data("jg.jwidth")+s.margins;this.galleryHeightToSet=this.offY+this.buildingRow.height+this.border,this.$gallery.height(this.galleryHeightToSet+this.getSpinnerHeight()),(!t||this.buildingRow.height<=s.rowHeight&&i)&&(this.offY+=this.buildingRow.height+s.margins,this.rows+=1,this.clearBuildingRow(),this.$gallery.trigger("jg.rowflush"))};var n=!1;i.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(t.proxy(function(){var t=parseFloat(this.$gallery.width());e()===n?Math.abs(t-this.galleryWidth)>this.settings.refreshSensitivity&&(this.galleryWidth=t,this.rewind(),this.startImgAnalyzer(!0)):(n=e(),this.galleryWidth=t)},this),this.settings.refreshTime)},i.prototype.isSpinnerActive=function(){return null!==this.spinner.intervalId},i.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},i.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.$gallery.height(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},i.prototype.startLoadingSpinnerAnimation=function(){var t=this.spinner,e=t.$el.find("span");clearInterval(t.intervalId),this.$gallery.append(t.$el),this.$gallery.height(this.offY+this.buildingRow.height+this.getSpinnerHeight()),t.intervalId=setInterval(function(){t.phase<e.length?e.eq(t.phase).fadeTo(t.timeSlot,1):e.eq(t.phase-e.length).fadeTo(t.timeSlot,0),t.phase=(t.phase+1)%(2*e.length)},t.timeSlot)},i.prototype.rewind=function(){this.lastFetchedEntry=null,this.lastAnalyzedIndex=-1,this.offY=this.border,this.rows=0,this.clearBuildingRow()},i.prototype.updateEntries=function(e){var i;return e&&null!=this.lastFetchedEntry?i=t(this.lastFetchedEntry).nextAll(this.settings.selector).toArray():(this.entries=[],i=this.$gallery.children(this.settings.selector).toArray()),i.length>0&&(t.isFunction(this.settings.sort)?i=this.sortArray(i):this.settings.randomize&&(i=this.shuffleArray(i)),this.lastFetchedEntry=i[i.length-1],this.settings.filter?i=this.filterArray(i):this.resetFilters(i)),this.entries=this.entries.concat(i),!0},i.prototype.insertToGallery=function(e){var i=this;t.each(e,function(){t(this).appendTo(i.$gallery)})},i.prototype.shuffleArray=function(t){var e,i,n;for(e=t.length-1;e>0;e--)i=Math.floor(Math.random()*(e+1)),n=t[e],t[e]=t[i],t[i]=n;return this.insertToGallery(t),t},i.prototype.sortArray=function(t){return t.sort(this.settings.sort),this.insertToGallery(t),t},i.prototype.resetFilters=function(e){for(var i=0;i<e.length;i++)t(e[i]).removeClass("jg-filtered")},i.prototype.filterArray=function(e){var i=this.settings;if("string"===t.type(i.filter))return e.filter(function(e){var n=t(e);return n.is(i.filter)?(n.removeClass("jg-filtered"),!0):(n.addClass("jg-filtered").removeClass("jg-visible"),!1)});if(t.isFunction(i.filter)){for(var n=e.filter(i.filter),s=0;s<e.length;s++)-1==n.indexOf(e[s])?t(e[s]).addClass("jg-filtered").removeClass("jg-visible"):t(e[s]).removeClass("jg-filtered");return n}},i.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),t.each(this.entries,t.proxy(function(e,i){var n=t(i);n.css("width",""),n.css("height",""),n.css("top",""),n.css("left",""),n.data("jg.loaded",void 0),n.removeClass("jg-entry");var s=this.imgFromEntry(n);s.css("width",""),s.css("height",""),s.css("margin-left",""),s.css("margin-top",""),s.attr("src",s.data("jg.originalSrc")),s.data("jg.originalSrc",void 0),this.removeCaptionEventsHandlers(n);var a=this.captionFromEntry(n);n.data("jg.createdCaption")?(n.data("jg.createdCaption",void 0),null!==a&&a.remove()):null!==a&&a.fadeTo(0,1)},this)),this.$gallery.css("height",""),this.$gallery.removeClass("justified-gallery"),this.$gallery.data("jg.controller",void 0)},i.prototype.analyzeImages=function(e){for(var i=this.lastAnalyzedIndex+1;i<this.entries.length;i++){var n=t(this.entries[i]);if(n.data("jg.loaded")===!0||"skipped"===n.data("jg.loaded")){var s=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,a=n.data("jg.width")/n.data("jg.height");if(s/(this.buildingRow.aspectRatio+a)<this.settings.rowHeight&&(this.flushRow(!1),++this["yield"].flushed>=this["yield"].every))return void this.startImgAnalyzer(e);this.buildingRow.entriesBuff.push(n),this.buildingRow.aspectRatio+=a,this.buildingRow.width+=a*this.settings.rowHeight,this.lastAnalyzedIndex=i}else if("error"!==n.data("jg.loaded"))return}this.buildingRow.entriesBuff.length>0&&this.flushRow(!0),this.isSpinnerActive()&&this.stopLoadingSpinnerAnimation(),this.stopImgAnalyzerStarter(),this.$gallery.trigger(e?"jg.resize":"jg.complete"),this.$gallery.height(this.galleryHeightToSet)},i.prototype.stopImgAnalyzerStarter=function(){this["yield"].flushed=0,null!==this.imgAnalyzerTimeout&&clearTimeout(this.imgAnalyzerTimeout)},i.prototype.startImgAnalyzer=function(t){var e=this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout(function(){e.analyzeImages(t)},.001)},i.prototype.onImageEvent=function(e,i,n){if(i||n){var s=new Image,a=t(s);i&&a.one("load",function(){a.off("load error"),i(s)}),n&&a.one("error",function(){a.off("load error"),n(s)}),s.src=e}},i.prototype.init=function(){var e=!1,i=!1,n=this;t.each(this.entries,function(s,a){var r=t(a),o=n.imgFromEntry(r);if(r.addClass("jg-entry"),r.data("jg.loaded")!==!0&&"skipped"!==r.data("jg.loaded"))if(null!==n.settings.rel&&r.attr("rel",n.settings.rel),null!==n.settings.target&&r.attr("target",n.settings.target),null!==o){var l=n.extractImgSrcFromImage(o);if(o.attr("src",l),n.settings.waitThumbnailsLoad===!1){var h=parseFloat(o.attr("width")),g=parseFloat(o.attr("height"));if(!isNaN(h)&&!isNaN(g))return r.data("jg.width",h),r.data("jg.height",g),r.data("jg.loaded","skipped"),i=!0,n.startImgAnalyzer(!1),!0}r.data("jg.loaded",!1),e=!0,n.isSpinnerActive()||n.startLoadingSpinnerAnimation(),n.onImageEvent(l,function(t){r.data("jg.width",t.width),r.data("jg.height",t.height),r.data("jg.loaded",!0),n.startImgAnalyzer(!1)},function(){r.data("jg.loaded","error"),n.startImgAnalyzer(!1)})}else r.data("jg.loaded",!0),r.data("jg.width",r.width()|parseFloat(r.css("width"))|1),r.data("jg.height",r.height()|parseFloat(r.css("height"))|1)}),e||i||this.startImgAnalyzer(!1),this.checkWidth()},i.prototype.checkOrConvertNumber=function(e,i){if("string"===t.type(e[i])&&(e[i]=parseFloat(e[i])),"number"!==t.type(e[i]))throw i+" must be a number";if(isNaN(e[i]))throw"invalid number for "+i},i.prototype.checkSizeRangesSuffixes=function(){if("object"!==t.type(this.settings.sizeRangeSuffixes))throw"sizeRangeSuffixes must be defined and must be an object";var e=[];for(var i in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(i)&&e.push(i);for(var n={0:""},s=0;s<e.length;s++)if("string"===t.type(e[s]))try{var a=parseInt(e[s].replace(/^[a-z]+/,""),10);n[a]=this.settings.sizeRangeSuffixes[e[s]]}catch(r){throw"sizeRangeSuffixes keys must contains correct numbers ("+r+")"}else n[e[s]]=this.settings.sizeRangeSuffixes[e[s]];this.settings.sizeRangeSuffixes=n},i.prototype.retrieveMaxRowHeight=function(){var e={};if("string"===t.type(this.settings.maxRowHeight))this.settings.maxRowHeight.match(/^[0-9]+%$/)?(e.value=parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1])/100,e.isPercentage=!1):(e.value=parseFloat(this.settings.maxRowHeight),e.isPercentage=!0);else{if("number"!==t.type(this.settings.maxRowHeight)){if(this.settings.maxRowHeight===!1||null===this.settings.maxRowHeight||"undefined"==typeof this.settings.maxRowHeight)return null;throw"maxRowHeight must be a number or a percentage"}e.value=this.settings.maxRowHeight,e.isPercentage=!1}if(isNaN(e.value))throw"invalid number for maxRowHeight";return e.isPercentage&&e.value<100&&(e.value=100),e},i.prototype.checkSettings=function(){this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,"rowHeight"),this.checkOrConvertNumber(this.settings,"margins"),this.checkOrConvertNumber(this.settings,"border");var e=["justify","nojustify","left","center","right","hide"];if(-1===e.indexOf(this.settings.lastRow))throw"lastRow must be one of: "+e.join(", ");if(this.checkOrConvertNumber(this.settings,"justifyThreshold"),this.settings.justifyThreshold<0||this.settings.justifyThreshold>1)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!==t.type(this.settings.cssAnimation))throw"cssAnimation must be a boolean";if("boolean"!==t.type(this.settings.captions))throw"captions must be a boolean";if(this.checkOrConvertNumber(this.settings.captionSettings,"animationDuration"),this.checkOrConvertNumber(this.settings.captionSettings,"visibleOpacity"),this.settings.captionSettings.visibleOpacity<0||this.settings.captionSettings.visibleOpacity>1)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings.captionSettings,"nonVisibleOpacity"),this.settings.captionSettings.nonVisibleOpacity<0||this.settings.captionSettings.nonVisibleOpacity>1)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings,"imagesAnimationDuration"),this.checkOrConvertNumber(this.settings,"refreshTime"),this.checkOrConvertNumber(this.settings,"refreshSensitivity"),"boolean"!==t.type(this.settings.randomize))throw"randomize must be a boolean";if("string"!==t.type(this.settings.selector))throw"selector must be a string";if(this.settings.sort!==!1&&!t.isFunction(this.settings.sort))throw"sort must be false or a comparison function";if(this.settings.filter!==!1&&!t.isFunction(this.settings.filter)&&"string"!==t.type(this.settings.filter))throw"filter must be false, a string or a filter function"},i.prototype.retrieveSuffixRanges=function(){var t=[];for(var e in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(e)&&t.push(parseInt(e,10));return t.sort(function(t,e){return t>e?1:e>t?-1:0}),t},i.prototype.updateSettings=function(e){this.settings=t.extend({},this.settings,e),this.checkSettings(),this.border=this.settings.border>=0?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},t.fn.justifiedGallery=function(e){return this.each(function(n,s){var a=t(s);a.addClass("justified-gallery");var r=a.data("jg.controller");if("undefined"==typeof r){if("undefined"!=typeof e&&null!==e&&"object"!==t.type(e)){if("destroy"===e)return;throw"The argument must be an object"}r=new i(a,t.extend({},t.fn.justifiedGallery.defaults,e)),a.data("jg.controller",r)}else if("norewind"===e);else{if("destroy"===e)return void r.destroy();r.updateSettings(e),r.rewind()}r.updateEntries("norewind"===e)&&r.init()})},t.fn.justifiedGallery.defaults={sizeRangeSuffixes:{},thumbnailPath:void 0,rowHeight:120,maxRowHeight:!1,margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.9,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!0,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:200,refreshSensitivity:0,randomize:!1,sort:!1,filter:!1,selector:"a, div:not(.spinner)"}}(jQuery),function(t){"use strict";function e(e,i,n,s,a,r,o,l,h){function g(){return y.pagesManager.retrieveUpdate().then(function(t){y.newPosts=y.newPosts.concat(y.pagesManager.processUpdates(t,!p)),y.newStickyPosts=y.newStickyPosts.concat(y.stickyPagesManager.processUpdates(t,!p))})}function c(){n.get({},function(i){"closed"===i.blog_status&&(e.cancel(y.interval.posts),e.cancel(y.interval.blog)),t.extend(y.blog,i)})}var m=s.settings.postsPerPage,d=100,u=s.settings.permalinkDelimiter||"?",f=s.settings.postOrder,p=s.settings.loadNewPostsManually,v=1e4,y=this,w=new i(m,f,(!1)),b=new o(w,u),x=new i(d,f,(!0)),S=new o(x,u);t.extend(y,{templateDir:s.assets_root,blog:l(s.blog),loading:!0,finished:!1,highlightsOnly:!1,settings:s.settings,newPosts:[],newStickyPosts:[],sortOptions:[{name:h("Editorial"),order:"editorial"},{name:h("Newest first"),order:"newest_first"},{name:h("Oldest first"),order:"oldest_first"}],orderBy:function(t){y.loading=!0,y.finished=!1,y.pagesManager.changeOrder(t).then(function(t){y.loading=!1,y.finished=t._meta.total<=t._meta.max_results*t._meta.page})},fetchNewPage:function(){return y.loading=!0,y.pagesManager.fetchNewPage().then(function(t){y.loading=!1,y.finished=t._meta.total<=t._meta.max_results*t._meta.page})},permalinkScroll:function(){y.loading=!0,y.permalink.loadPost().then(function(t){a(t),y.loading=!1},function(){y.loading=!1})},isAllowedToLoadMore:function(){return!y.loading&&!y.finished},applyUpdates:function(){w.applyUpdates(y.newPosts,!0),y.newPosts=[],x.applyUpdates(y.newStickyPosts,!0),y.newStickyPosts=[]},toggleHighlighsOnly:function(){y.highlightsOnly=!y.highlightsOnly,y.loading=!0,y.finished=!1,x.changeHighlight(y.highlightsOnly),w.changeHighlight(y.highlightsOnly).then(function(t){y.loading=!1,y.finished=t._meta.total<=t._meta.max_results*t._meta.page}),y.highlightsOnly&&(x.hideSticky=!1)},pagesManager:w,permalink:b,stickyPagesManager:x,stickyPermalink:S}),y.stickyPagesManager.fetchNewPage(),y.fetchNewPage().then(function(){function t(t){"loadMore"===t.data&&i()}y.permalinkScroll(),"closed"!==y.blog.blog_status&&(y.interval={posts:e(g,v),blog:e(c,3*v)});var i=_.debounce(y.fetchNewPage,1e3);window.addEventListener("message",t,!1)})}function i(t){var e=this,i=_.filter(e.items,function(t){return"image"===t.item_type});e.images=i}e.$inject=["$interval","PagesManager","blogs","config","$anchorScroll","$timeout","Permalink","transformBlog","gettext"],i.$inject=["$scope"],t.module("theme",["liveblog-embed","ngAnimate","infinite-scroll","gettext"]).run(["gettextCatalog","config",function(t,e){t.setCurrentLanguage(e.settings.language)}]).run(["$rootScope",function(e){t.element(document).on("click",function(i){e.$broadcast("documentClicked",t.element(i.target))})}]).controller("TimelineCtrl",e).directive("lbItem",["asset",function(t){return{restrict:"AE",scope:{ident:"=",item:"="},templateUrl:t.templateUrl("views/item.html")}}]).directive("lbAuthor",["asset",function(t){return{restrict:"AE",scope:{item:"=",timeline:"="},templateUrl:t.templateUrl("views/author.html")}}]).directive("lbGallery",["asset",function(e){return{restrict:"AE",scope:{items:"="},bindToController:!0,controller:i,controllerAs:"gallery",templateUrl:e.templateUrl("views/gallery.html"),link:function(e,i,n,s){e.$watch(n.items,function(e){setTimeout(function(){var e=t.element(i).find(".gallery");$(e[0]).justifiedGallery({margins:3})},100)})}}}]).directive("lbPosts",["asset",function(t){return{restrict:"E",scope:{posts:"=",timeline:"="},templateUrl:t.templateUrl("views/posts.html")}}]),t.module("infinite-scroll").value("THROTTLE_MILLISECONDS",1e3)}(angular),angular.module("gettext").run(["gettextCatalog",function(t){t.setStrings("cs",{Cancel:"Zrušit",Comment:"Váš příspěvek","Comment *":"Text *","Comment should be maximum 300 characters in length.":"Maximální délka textu je 300 znaků.",Editorial:"podle redakce","Load more posts":"Načíst další",Loading:"Načítám","Name *":"Jméno *","Name should be maximum 30 characters in length.":"Maximální délka jména je 30 znaků.","Newest first":"od nejnovějších","Oldest first":"od nejstarších","Please fill in your Comment.":"Napište váš text.","Please fill in your Name.":"Napište své jméno.","Post a comment":"Otázka / komentář",Send:"Odeslat","Sort by:":"Řazení:","Your comment was sent for approval.":"Váš text byl úspěšně odeslán. Čeká na schválení."}),t.setStrings("de",{Cancel:"Abbrechen",Comment:"Kommentar","Comment *":"Kommentar","Comment should be maximum 300 characters in length.":"Kommentar darf maximal 300 Zeichen lang sein.",Editorial:"Redaktionell","Load more posts":"Mehr Einträge laden",Loading:"Lade","Name *":"Name","Name should be maximum 30 characters in length.":"Name darf maximal 30 Zeichen lang sein","Newest first":"Neueste zuerst","No posts for now.":"Kein Beitrag vorhanden","Oldest first":"Älteste zuerst","One pinned post":["Angehefteter Eintrag","{{$count}} Angeheftete Einträge"],"Please fill in your Comment.":"Bitte Kommentar hier eintragen","Please fill in your Name.":"Bitte Namen hier eintragen","Post a comment":"Kommentar posten","See one new update":["Neuen Beitrag anzeigen","Neue Beiträge anzeigen"],Send:"Abschicken","Show all posts":"Alle Beiträge anzeigen","Show highlighted post only":"Anzeigen hervorgehoben Beitrag ist nur","Sort by:":"Ordnen nach","Updated {{post.content_updated_date | prettifyIsoDate}}":"Aktualisiert am {{post.content_updated_date | prettifyIsoDate}}","Your comment was sent for approval.":"Ihr Kommentar wartet auf Freischaltung,","{{ item.meta.caption }} credit: {{ item.meta.credit }}":"{{ item.meta.caption }} kredit: {{ item.meta.credit }}"}),t.setStrings("fr",{Cancel:"Annuler",Comment:"Commentaire","Comment *":"Commentaire *","Comment should be maximum 300 characters in length.":"Un commentaire ne peut excéder 300 signes",Editorial:"Éditorial","Load more posts":"Afficher plus de messages",Loading:"Chargement","Name *":"Nom *","Name should be maximum 30 characters in length.":"Le nom ne peut excéder 30 signes","Newest first":"Le plus récent d'abord","Oldest first":"Plus ancien en premier","Please fill in your Comment.":"Votre commentaire.","Please fill in your Name.":"Votre nom.","Post a comment":"Envoyer un commentaire",Send:"Envoyer","Sort by:":"Trier par:","Your comment was sent for approval.":"Votre commentaire a été envoyé et est en attente de validation."}),t.setStrings("nl",{Cancel:"Annuleren",Comment:"Reactie","Comment *":"Tekst *","Comment should be maximum 300 characters in length.":"Uw reactie van maximaal 300 tekens.",Editorial:"Redactioneel","Load more posts":"Meer",Loading:"Laden","Name *":"Naam *","Name should be maximum 30 characters in length.":"Uw naam kan maximaal 30 tekens lang zijn.","Newest first":"Toon nieuwste eerst","Oldest first":"Toon oudste eerst","Please fill in your Comment.":"Uw reactie.","Please fill in your Name.":"Vul hier uw naam in.","Post a comment":"Schrijf een reactie",Send:"Verzenden","Sort by:":"Sorteer:","Your comment was sent for approval.":"Uw reactie is ontvangen ter beoordeling."}),t.setStrings("ro",{Cancel:"Anulează",Comment:"Comentează","Comment *":"Comentariu *","Comment should be maximum 300 characters in length.":"Comentariu nu poate fi mai lung de 300 de caractere.",Editorial:"editorial","Load more posts":"Încarcă mai multe posturi",Loading:"Se încarcă","Name *":"Numele *","Name should be maximum 30 characters in length.":"Numele nu poate fi mai lung de 30 de caractere.","Newest first":"Cele mai noi","Oldest first":"Cele mai vechi","Please fill in your Comment.":"Completează comentariu.","Please fill in your Name.":"Completează numele.","Post a comment":"Scrie un comentariu",Send:"Trimite","Sort by:":"Ordonează după:","Your comment was sent for approval.":"Comentariul tău a fost trimis spre aprobare."})}]),angular.module("theme").run(["$templateCache",function(t){t.put("/themes_assets/classic/views/author.html",'<div class="lb-author" ng-if="timeline.settings.showAuthor"><div ng-if="timeline.settings.showAuthor && timeline.settings.showAuthorAvatar" ng-class="{\'lb-author__avatar\': (item.item_type !== \'comment\'),\n                       \'lb-author__comment\': (item.item_type === \'comment\')}"><img ng-src="{{ item.original_creator.picture_url }}" ng-srcset="{{ item.original_creator.picture_srcset }}" sizes="(min-width: 1600px) 200px, 60px"></div><div class="lb-author__date" ng-bind="item.displayDate | prettifyIsoDate"></div><div ng-if="!timeline.settings.authorNameLinksToEmail || item.item_type === \'comment\'" class="lb-author__name" ng-bind="item.original_creator[item.item_type === \'comment\'? \'display_name\': timeline.settings.authorNameFormat]"></div><div ng-if="timeline.settings.authorNameLinksToEmail && item.item_type !== \'comment\'" class="lb-author__name"><a href="mailto:{{post.mainItem.original_creator.email}}" ng-bind="item.original_creator[timeline.settings.authorNameFormat]"></a></div></div>'),
t.put("/themes_assets/classic/views/comments.html",'<div class="modal border-bottom ng-cloak" ng-show="modal"><div class="modal-dialog"><div ng-show="notify" class="notify"><div class="content"><div class="modal-header"><h3 translate>Your comment was sent for approval.</h3></div></div></div><div ng-show="form"><form name="comment" novalidate ng-submit="send();"><div class="content"><div class="modal-header"><h2 translate>Post a comment</h2></div><div class="modal-body"><fieldset><div class="field"><label for="commenter" translate>Name *</label><input name="commenter" ng-model="commenter"><div role="alert"><span class="error" ng-show="commenter.length < 3" translate>Please fill in your Name.</span> <span class="error" ng-show="commenter.length >30" translate>Name should be maximum 30 characters in length.</span></div></div><div class="field"><label for="content" translate>Comment *</label><textarea name="content" ng-model="content"></textarea><div role="alert"><span class="error" ng-show="content.length < 3" translate>Please fill in your Comment.</span> <span class="error" ng-show="content.length > 300" translate>Comment should be maximum 300 characters in length.</span></div></div></fieldset></div><div class="modal-footer"><button class="btn" ng-click="comment=false"><span translate>Cancel</span></button> <button type="submit" class="btn btn-primary"><span translate>Send</span></button></div></div></form></div></div></div>'),t.put("/themes_assets/classic/views/dropdown.html",'<div class="dropdown-container" ng-class="{ \'show\': listVisible }"><div class="dropdown-display" ng-click="show();" ng-class="{ \'clicked\': listVisible }"><span ng-if="!isPlaceholder">{{display | translate}}</span> <span class="placeholder" ng-if="isPlaceholder">{{placeholder}}</span> <i class="fa fa-angle-down"></i></div><div class="dropdown-list"><div><div ng-repeat="item in list" ng-click="select(item)" ng-class="{ \'selected\': isSelected(item) }"><span>{{item.name | translate}}</span> <i class="fa fa-check"></i></div></div></div></div>'),t.put("/themes_assets/classic/views/gallery.html",'<div class="justified-gallery gallery"><a href="{{ item.picture_url }}" ng-repeat="item in gallery.images track by item._id"><img ng-src="{{ item.picture_url }}" ng-srcset="{{ item.picture_srcset }}" alt="{{ item.meta.caption }}"></a></div>'),t.put("/themes_assets/classic/views/generic-embed.html",'<div ng-if="item.meta.html" class="item--embed" lb-bind-html html-content="{{item.meta.html | fixEmbed}}"></div><article class="item--embed"><a ng-href="{{ item.meta.url }}" ng-if="!item.meta.html && item.meta.thumbnail_url" target="_blank" ng-class="{ \'item--embed__illustration\': item.meta.description, \'item--embed__only-illustration\': !item.meta.description}"><img ng-src="{{ item.meta.thumbnail_url }}"></a><div class="item--embed__title" ng-if="item.meta.title"><a ng-href="{{ item.meta.url }}" target="_blank" ng-bind="item.meta.title"></a></div><div class="item--embed__description" ng-if="item.meta.description" ng-bind="item.meta.description"></div><div class="item--embed__credit" ng-if="item.meta.credit" ng-bind="item.meta.credit"></div></article>'),t.put("/themes_assets/classic/views/item.html",'<div ng-switch="item.item_type" ng-class="{\'lb-item\': ident}"><div ng-switch-when="embed"><div ng-switch="item.meta.provider_name"><div ng-switch-when="Twitter"><lb-twitter-card lb-twitter-content="{{ item.meta.html }}"></lb-twitter-card></div><div ng-switch-default lb-generic-embed lb-fluid-iframe item="item"></div></div></div><div ng-switch-when="quote"><blockquote><p>{{ item.meta.quote }}</p><h4>{{ item.meta.credit }}</h4></blockquote></div><div ng-switch-when="image"></div><article ng-switch-default lb-bind-html html-content="{{ item.text | outboundAnchors | fixMarkup }}"></article></div>'),t.put("/themes_assets/classic/views/posts.html",'<article ng-repeat="post in posts() track by post._id" class="lb-post list-group-item ng-cloak" ng-class="{\'show-author-avatar\': timeline.settings.showAuthor && timeline.settings.showAuthorAvatar,\n                    \'lb-post-permalink-selected\': post._id === timeline.permalink._id}"><lb-author item="post.mainItem" timeline="timeline"></lb-author><div class="lb-post-highlighted" ng-if="post.highlight"><i class="fa fa-star fa-2"></i></div><div class="lb-post-permalink"><a href="{{ timeline.permalink.get(post._id) }}" id="{{ post._id }}" target="_blank"><i class="fa fa-link fa-2"></i></a></div><lb-gallery items="post.items"></lb-gallery><div ng-repeat="item in post.items track by item._id" class="lb-item"><div ng-if="post.fullDetails && !$first" class="list-group-item"><div class="lb-timeline__header"><lb-author item="item" timeline="timeline"></lb-author><lb-item item="item" ident="true"></lb-item></div></div><div ng-if="!post.fullDetails || $first"><lb-item item="item"></lb-item></div></div><div class="lb-updated-date ng-cloak" ng-show="post.showUpdate" translate>Updated {{post.content_updated_date | prettifyIsoDate}}</div></article>')}]);